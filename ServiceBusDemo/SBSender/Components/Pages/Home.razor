@page "/"
@using SBShared.Models
@using SBSender.Services
@inject IQueueService queue

<PageTitle>Home</PageTitle>

<h1>Hello, world!</h1>

Welcome to your new app.

<EditForm FormName="personForm" Model="person" OnValidSubmit="@PublishMessage">
    <DataAnnotationsValidator></DataAnnotationsValidator>
    <ValidationSummary/>
    <div class="form-group">
        <label for="firstName">First Name</label>
        <input id="firstName" @bind="@person.FirstName" class="form-control"></input>
    </div>
    <div class="form-group">
        <label for="lastName">Last Name</label>
        <input id="lastName" @bind="@person.LastName" class="form-control"></input>
    </div>
    <div>
        <button type="submit">Submit</button>
    </div>
</EditForm>

@code {
    private PersonModel person = new PersonModel();
    
    private async Task PublishMessage()
    {
        person.FirstName = "Zahir";
        person.LastName = "LastName";
        
        await queue.SendMessageAsync<PersonModel>(new List<PersonModel> { person }, "serviceBusQueue");
    }
}
    using Microsoft.AspNetCore.Mvc.ModelBinding;
